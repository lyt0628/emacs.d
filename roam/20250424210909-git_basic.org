:PROPERTIES:
:ID:       ce7cbca2-b25c-4cf9-af23-08fbb355833f
:END:
#+title: git/basic

* 获取 Git 仓库
|-----------------+------|
| Command         | Note |
|-----------------+------|
| git init        |      |
|-----------------+------|
| git clone <url> |      |
|-----------------+------|


* 更新仓库

|---------------+----------------------------------------|
| Command       | Note                                   |
|---------------+----------------------------------------|
| git status    |                                        |
|---------------+----------------------------------------|
| git add       |                                        |
|---------------+----------------------------------------|
| git status -s | ?? - Unracked                          |
|               | A - Staged                             |
|               | M - Modified                           |
|               | MM - Modified in Staged(暂存后发生了修改) |
|---------------+----------------------------------------|
[[file:./assets/git-lifecycle.png]]


* gitignore 规则
|------------+-----------------------------------|
| Rule       | Note                              |
|------------+-----------------------------------|
| # 开头      | 注释                               |
|------------+-----------------------------------|
| glob 表达式 | 会递归地应用在工作目录，见 [[id:529cd83e-6606-4b79-8577-6536d60d4df0][linux/glob]] |
|------------+-----------------------------------|
| / 开头      | 阻止递归                            |
|------------+-----------------------------------|
| / 结尾      | 指定目录                            |
|------------+-----------------------------------|
| ! 开头      | 规则取反                            |
|------------+-----------------------------------|




* Diff 比较
|------------------+----------------------------------|
| Command          | Note                             |
|------------------+----------------------------------|
| git diff         | 查看 Unmodified 和 Modified 的区别 |
|------------------+----------------------------------|
| git diff -staged | 查看 Commited 和 Staged 的区别     |
|------------------+----------------------------------|


* 提交仓库
|---------------------+-----------------------------------------------------------|
| Command             | Note                                                      |
|---------------------+-----------------------------------------------------------|
| git commit          | 提交 Staged，进入 Vim 编辑复杂提交信息                        |
|---------------------+-----------------------------------------------------------|
| git commit -m 'msg' | 提交 Staged, 简短提交信息                                    |
|---------------------+-----------------------------------------------------------|
| git commit -a       | 提交 所有 Tracked， 包括 UnModified， Modifeid， 以及 Staged |
|---------------------+-----------------------------------------------------------|
| git commit -amend   | 用本地提交 替换上次提交                                              |
|---------------------+-----------------------------------------------------------|



* 移除
|------------------------------+--------------------------------------------------|
| Command                      | Note                                             |
|------------------------------+--------------------------------------------------|
| git rm                       | 从 Git 移除，                                      |
|------------------------------+--------------------------------------------------|
| git rm -f                    | 将 Modified in staged 从 Git 移除，                |
|                              | 在 Staged 后进行的修改丢失                          |
|------------------------------+--------------------------------------------------|
| rm <file> && git rm <file>   | 从工作目录以及 Git 中移除                           |
|------------------------------+--------------------------------------------------|
| git --cached <file>          | 从 Git 中移除，但是保留在 工作目录                    |
|------------------------------+--------------------------------------------------|
| git mv <old_name> <new_name> | 重命名                                            |
|                              | 相当于                                            |
|                              | mv <old_name> <new_name>                         |
|                              | git rm <old_name>                                |
|                              | git add <new_name>                               |
|------------------------------+--------------------------------------------------|
| git reset HEAD <file>        | 把文件从 Staged 移除，返回 为 Modified              |
|------------------------------+--------------------------------------------------|
| git checkout -- <file>       | 用上一次暂存的快照覆盖，从 Modified 返回 Unmodified， |
|                              | 修改丢失                                             |
|------------------------------+--------------------------------------------------|


* 查看仓库历史
|----------------------------------------------+--------------------------------------|
| Command                                      | Note                                 |
|----------------------------------------------+--------------------------------------|
| git log                                      | 查看简单的提交历史                      |
|----------------------------------------------+--------------------------------------|
| git log --stat                               | 查看带有统计信息的提交历史               |
|----------------------------------------------+--------------------------------------|
| git log -p                                   | 查看 带有 Diff 的提交历史，显示有提交补丁 |
|----------------------------------------------+--------------------------------------|
| git log -2                                   | 查看最近两次提交历史                    |
|----------------------------------------------+--------------------------------------|
| git log --pretty=[oneline/short/full/fuller] |                                      |
|----------------------------------------------+--------------------------------------|
| git log <prertrt option> --graph             | 使用 Ascii 图形展示提交历史             |
|----------------------------------------------+--------------------------------------|
| git log --since=2.week                       | 查看最近两周提交                        |
|                                              | --until                        |
|                                              | "2022-10-07" / "2 years one day ago" |
|----------------------------------------------+--------------------------------------|
| git log --author                             | 根据作者匹配 提交记录                   |
|----------------------------------------------+--------------------------------------|
| --all-match                                  | 使用逻辑与匹配过滤条件，默认使用逻辑或     |
|----------------------------------------------+--------------------------------------|
|                                              |                                      |
|----------------------------------------------+--------------------------------------|
